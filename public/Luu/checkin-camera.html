<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>TVTS â€“ CHECK IN</title>
<style>
body {
  background:#020617; color:#e5e7eb;
  font-family:Arial; text-align:center;
}
video { width:420px; border-radius:16px; border:4px solid #38bdf8; }
button {
  margin-top:20px; padding:14px 28px;
  font-size:20px; font-weight:bold;
  background:#22c55e; border:none; border-radius:12px;
}
</style>
</head>
<body>

<h1>CHECK-IN TVTS</h1>
<video id="video" autoplay playsinline></video><br>
<button onclick="checkin()">ðŸ“¸ CHECK-IN</button>

<canvas id="canvas" width="420" height="320" style="display:none"></canvas>

<script src="/socket.io/socket.io.js"></script>
<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const socket = io();

navigator.mediaDevices.getUserMedia({
  video: { facingMode: "user" }, audio:false
}).then(stream => video.srcObject = stream);

function checkin() {
  ctx.drawImage(video,0,0,canvas.width,canvas.height);
  const image = canvas.toDataURL("image/jpeg",0.85);
  const face_id = "guest_" + Date.now();

  socket.emit("checkin", { face_id, image });
  alert("âœ… Check-in thÃ nh cÃ´ng");
}
</script>
</body>
</html>
